<html xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    
<h:head>
  <title>Kieker Live Demo</title>
  <link rel="stylesheet" type="text/css" media="all" href="http://kieker-monitoring.net/wp-content/themes/kieker/style.css" />
  <link rel="shortcut icon" type="image/x-icon" href="resources/favicon.ico" />
  <style>
		/* Link color */
		a,
		#site-title a:focus,
		#site-title a:hover,
		#site-title a:active,
		.entry-title a:hover,
		.entry-title a:focus,
		.entry-title a:active,
		.widget_twentyeleven_ephemera .comments-link a:hover,
		section.recent-posts .other-recent-posts a[rel="bookmark"]:hover,
		section.recent-posts .other-recent-posts .comments-link a:hover,
		.format-image footer.entry-meta a:hover,
		#site-generator a:hover {
			color: #2456a1;
		}
		section.recent-posts .other-recent-posts .comments-link a:hover {
			border-color: #2456a1;
		}
		article.feature-image.small .entry-summary p a:hover,
		.entry-header .comments-link a:hover,
		.entry-header .comments-link a:focus,
		.entry-header .comments-link a:active,
		.feature-slider a.active {
			background-color: #2456a1;
		}
	</style>
</h:head>

<h:body class="page">
	<div id="page" class="hfeed" style="background:#FFFFFF">
      <div id="header">
        <img src="header_image_small.jpg" width="960" height="125" border="0" usemap="#kiekermenumap" />
        <map name="kiekermenumap">
          <area shape="rect" coords="70,3,350,93" href="http://kieker-monitoring.net" alt="home" title="home" />
        </map>
      </div>	    	
	  	<div class="menu-header">
	  		<ul id="menu-header_menu" class="menu">
	  			<li><a href="recordList.jsf">Record List</a></li>
	  			<li><a href="chart.jsf">Method Response Times</a></li>
<!-- 			<li><a href="graph.jsf">Graph</a></li> -->
		       	<li><a href="systemModel.jsf">System Model</a></li>
		       	<li><a style="color:#000000" href="cpu.jsf">CPU and MemSwap</a></li>
		       	<li><a href="../index.jsf">Main Menu</a></li>
			</ul>
		</div>
	
		<h:form>
		 
			<table>
				<tr>
					<td>
						<p:selectCheckboxMenu id="cpubox" value="#{cpuBean.selectedCPUs}" label="Select CPUs" 
							filter="true" filterText="Filter" filterMatchMode="contains">  
			        		<f:selectItems value="#{cpuBean.possibleCPUs}" />  
			        		<p:ajax update="cpubox" event="select"/>
			    		</p:selectCheckboxMenu>
					</td>
					<td>
						<p:selectCheckboxMenu id="cpuattributebox" value="#{cpuBean.selectedCpuAttributes}" label="Select Attributes" 
							filter="true" filterText="Filter" filterMatchMode="contains">  
			        		<f:selectItems value="#{cpuBean.possibleCpuAttributes}" />  
			        		<p:ajax update="cpuattributebox" event="select"/>
			    		</p:selectCheckboxMenu>
					</td>
					<td>
						<p:selectCheckboxMenu id="memswapbox" value="#{cpuBean.selectedHosts}" label="Select Hosts" 
							filter="true" filterText="Filter" filterMatchMode="contains">  
			        		<f:selectItems value="#{cpuBean.possibleHosts}" />  
			        		<p:ajax update="memswapbox" event="select"/>
			    		</p:selectCheckboxMenu>
					</td>
				</tr>
			</table>
		
			<h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">  
  				<h:outputText value="Intervall length in seconds: " />  
				<p:selectOneMenu value="#{cpuBean.intervallLength}">  
					<f:selectItems value="#{cpuBean.possibleIntervallLength}"/>  
					<p:ajax update="charts" listener="#{cpuBean.changeIntervallLength}"/>
				</p:selectOneMenu>
				
  				<h:outputText value="Number of displayed entries: " />  
				<p:selectOneMenu value="#{cpuBean.numberOfDisplayedEntries}">  
					<f:selectItems value="#{cpuBean.possibleNumberOfDisplayedEntries}"/> 
				</p:selectOneMenu>
			</h:panelGrid>	
		    
			<h:panelGroup id="charts">
			  	<ui:repeat value="#{cpuBean.cpuModels}" var="model">	         
					<p:lineChart value="#{model.model}" legendPosition="ne"  
				   		title="#{model.name}" minY="0" maxY="100" style="height:300px;margin-top:20px"
				   		xaxisLabel="Time" yaxisLabel="Percent"/>
				</ui:repeat>
				<ui:repeat value="#{cpuBean.memSwapModels}" var="model">	         
					<p:barChart value="#{model.model}" legendPosition="ne" stacked="true"  
				   		title="#{model.name} - MEM" minY="0" style="height:200px;margin-top:20px"
				   		xaxisLabel="Time" yaxisLabel="MB"/>
				   	<p:barChart value="#{model.secondModel}" legendPosition="ne" stacked="true" 
				   		title="#{model.name} - SWAP" minY="0" style="height:200px;margin-top:20px"
				   		xaxisLabel="Time" yaxisLabel="MB"/>
				</ui:repeat>
			</h:panelGroup>
			
			<p:poll interval="1" update="charts"/>
			
		</h:form>
	</div>	
	
</h:body>
</html>