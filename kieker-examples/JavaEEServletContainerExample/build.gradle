apply plugin: 'war'

sourceSets {
  main { 
    java { 
      srcDir 'livedemo-source/src' 
    } 
  }
}

webAppDirName = 'livedemo-source/WebContent'

dependencies {
  compile fileTree('livedemo-source/lib') {
    include '*.jar'
  }
}

task unwar(type: Copy) {
  from war
  into 'jetty/webapps'
  rename '(.*).war', 'livedemo.war'
}

task buildExample(dependsOn: [war, unwar]) << {
}

clean {
	delete 'jetty/webapps/livedemo.war'
	delete fileTree(dir: 'livedemo-source/lib', include: 'kieker-*-emf.jar')
	delete fileTree(dir: 'jetty/webapps/jpetstore/WEB-INF/lib', include: '*sigar*')
	delete fileTree(dir: 'jetty/webapps/jpetstore/WEB-INF/lib', include: 'kieker*')
}