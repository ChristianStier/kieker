<?xml version="1.0" encoding="UTF-8"?>
<project name="KiekerOverheadEvaluation" default="build-all" basedir=".">
    <property file="build.properties"/>

    <target name="build-all"
            depends="clean,init,compile-all">
    </target>

    <target name="init" depends="">
        <!-- Register special aspectJ commands in ant - allow ant to use special AspectJ commands: -->
        <!--<taskdef resource="org/aspectj/tools/ant/taskdefs/aspectjTaskdefs.properties" classpath="${aspectjtoolsjar}"/>
        <fail message="Critical error: AspectJ library not found
                       in ${aspectjtoolsjar}. 
                       Check your build.properties.">
            <condition>
                <not>
                    <available file="${aspectjtoolsjar}"/>
                </not>
            </condition>
        </fail>-->
        <mkdir dir="${build.dir}"/>
        <mkdir dir="tmp"/>
    </target>

    <target name="compile-all"
	    depends="init">
        <path id="compile-classpath">
            <fileset dir="lib/">
                <include name="aspectjrt-*.jar"/>
                <include name="commons-cli-*.jar"/>
                <include name="commons-logging-*.jar"/>
                <include name="kieker-common-*.jar"/>
                <include name="kieker-monitoring-*.jar"/>
            </fileset>
        </path>

        <javac source="1.5" target="1.5"
               destDir="${build.dir}"
               debug="true"
               classpathref="compile-classpath"
               srcdir="src">
        </javac>
    </target>

    <target name="clean">
	    <!-- <delete dir="tmp"/>-->
        <delete dir="${build.dir}"/>
    </target>

</project>
