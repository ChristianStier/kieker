%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Appendix
% 
% $Date$
% $Rev$:
% $Author$


\appendix

\chapter*{Appendix}
\addcontentsline{toc}{chapter}{Appendix}
\addtocontents{toc}{\protect\setcounter{tocdepth}{-1}}

  \chapter{\KiekerMonitoringPart{} Configuration File}\label{sec:appdx:monitoringproperties}

This is the file \file{\monitoringPropertiesFile} from the binary release and 
constitutes \KiekerMonitoringPart{}'s default configuration.

\

\setXMLListing
\lstinputlisting[caption=\monitoringPropertiesFile]{../../META-INF/kieker.monitoring.properties}

\chapter{Additional Source Code Listings}
\section{MyNamedPipeManager and MyPipe}\label{appendix:pipeListings}
      \setJavaCodeListing
      \lstinputlisting[caption=MyNamedPipeManager.java]{\customComponentsBookstoreApplicationDir/src/bookstoreApplication/MyNamedPipeManager.java}
\newpage
      \setJavaCodeListing
      \lstinputlisting[caption=MyPipe.java]{\customComponentsBookstoreApplicationDir/src/bookstoreApplication/MyPipe.java}

\chapter{Example Console Outputs}

\section{Quick Start Example (Chapter~\ref{chap:example})}\label{sec:appendix:manualInstrumentation:output}
% \subsubsection{Monitoring}
% 		The following listing shows the produced log during a run of the Bookstore Application with the manual monitoring probes.
\input{appendix_ch2_ExampleLog_1.inc}
\newpage
% \subsubsection{Analysis}
% 		The second listing is the log during the analysis of the produced data. It can be seen that some of the calls are accepted and some others refused.
\input{appendix_ch2_ExampleLog_2.inc}
\newpage	
\section{Trace Monitoring, Analysis \& Visualization (Chapter \ref{chap:aspectJ})}
\input{appendix_ch5_ExampleLog_1.inc}
	

\chapter{Ant Scripts}
\section{Quick Start Example (Chapter \ref{chap:example})}
The following \file{build.xml} and \file{build.properties} files can be %
used for compiling and executing the manually instrumentated Bookstore %
application and the analysis, as described in Chapter~\ref{chap:example}. %
The files are included in the directory \file{\manualInstrumentedBookstoreApplicationDirDistro{}/}.

      In order to run the analysis of the application, it is necessary to pass the location of the monitoring log directory. This is done via the parameter \textit{analysis.directory}, e.g.:
      \setBashListing
      \input{appendix_Compile_Run_Example_1.inc}

% \enlargethispage{1.2cm}
      \setXMLListing
      \lstinputlisting[caption=build.properties]{\manualInstrumentedBookstoreApplicationDir/build.properties}
      \lstinputlisting[caption=build.xml]{\manualInstrumentedBookstoreApplicationDir/build.xml}
\newpage
\section{Custom Components (Chapters \ref{chap:componentsMonitoring} and \ref{chap:componentsAnalysis})}
      The following \file{build.xml} and \file{build.properties} files can be used for compiling and executing the manually instrumentated Bookstore application with the custom components, as described in Chapters~\ref{chap:componentsMonitoring} and \ref{chap:componentsAnalysis}. %
The files are included in the directory \file{\customComponentsBookstoreApplicationDirDistro{}/}.
      \setXMLListing
      \lstinputlisting[caption=build.properties]{\customComponentsBookstoreApplicationDir/build.properties}
      \lstinputlisting[caption=build.xml]{\customComponentsBookstoreApplicationDir/build.xml}
\newpage
\section{AspectJ-based Trace Monitoring (Chapter \ref{chap:aspectJ})}
      The following \file{build.xml} and \file{build.properties} files can be used for compiling and executing the Bookstore application instrumentated with AspectJ, as described in Chapter~\ref{chap:aspectJ}. %

The files are included in the directory \file{\aspectJBookstoreApplicationDirDistro{}/}.
      \setXMLListing
      \lstinputlisting[caption=build.properties]{\aspectJBookstoreApplicationDir/build.properties}     
      \lstinputlisting[caption=build.xml]{\aspectJBookstoreApplicationDir/build.xml}

\chapter{Example \KiekerTraceAnalysis{} Outputs}
\input{Appendix-example-TraceAnalysis-outputs.inc}

\chapter{Using the JMS Writer and Reader}\label{appendix:usingJMS}

This chapter gives a brief description on how to use the \class{AsyncJMSWriter} and \class{JMSReader} %
classes. This example is based on the Bookstore %
application with manual instrumentation presented in Chapter~\ref{chap:example}. %
The directory \dir{\JMSBookstoreApplicationDirDistro/} contains the %
sources, ant scripts etc. 

% \paragraph*{Preparation}

\begin{compactenum}
\item Copy the files \file{\mainJar} and \file{\commonsLoggingJar} from the %
binary distribution to the example's \dir{lib/} directory.
\item The file \file{\JMSBookstoreApplicationDirDistro/META-INF/kieker.monitoring.\-pro\-perties} %
is already configured to use the \class{AsyncJMSWriter}:
\end{compactenum}

\setPropertiesListing
\lstinputlisting[firstline=40,lastline=42,caption=Excerpt from \file{kieker.monitoring.properties} configuring the JMS writer]{\JMSBookstoreApplicationDir/META-INF/kieker.monitoring.properties}

\begin{compactenum}\setcounter{enumi}{2}
\item Download an OpenJMS install archive from \url{http://openjms.sourceforge.net} %
and decompress it to the root directory of the example. 
\item Copy the following files from the OpenJMS \dir{lib/} folder to the \dir{lib/} directory 
   of this example:
\begin{compactenum}
\item \file{openjms-<version>.jar}
\item \file{openjms-common-<version>.jar}
\item \file{openjms-net-<version>.jar}
\item \file{jms-<version>.jar}
\item \file{concurrent-<version>.jar}
\item \file{spice-jndikit-<version>.jar}
\end{compactenum}
\end{compactenum}

\enlargethispage{2cm}

% \paragraph*{Execution}%
 The execution of the example is performed by the following three steps:
\begin{enumerate}
\item Start the JMS server (you may have to set your \class{JAVA\_HOME} variable first):

\setBashListing
\begin{lstlisting}[caption=]
#\lstshellprompt{}# openjms-<version>/bin/startup.sh
\end{lstlisting}
\item Start the analysis part (in a new terminal):
\setBashListing
\begin{lstlisting}[caption=]
#\lstshellprompt{}# ant run-analysis
\end{lstlisting}
\item Start the instrumented Bookstore (in a new terminal):
\setBashListing
\begin{lstlisting}[caption=]
#\lstshellprompt{}# ant run-monitoring
\end{lstlisting}
\end{enumerate}

\chapter{Libraries}
    The following table shows all libraries which are used by \Kieker\ and explains them briefly.
    \input{Libraries}

% \chapter{Troubleshooting}
